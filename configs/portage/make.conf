# Gentoo make.conf for HP ZBook Power G9
# Intel i7-12800H + NVIDIA RTX A2000

# Compiler flags optimized for this system
COMMON_FLAGS="-march=native -O2 -pipe"
CFLAGS="${COMMON_FLAGS}"
CXXFLAGS="${COMMON_FLAGS}"
FCFLAGS="${COMMON_FLAGS}"
FFLAGS="${COMMON_FLAGS}"
LDFLAGS="-Wl,-O2 -Wl,--as-needed"
RUSTFLAGS="-C target-cpu=native"

# Parallel builds
# MAKEOPTS: threads per package compile
# --jobs: concurrent package builds (keep low to avoid memory issues)
# --load-average: stop spawning if system load exceeds this
MAKEOPTS="-j__MAKE_JOBS__"
EMERGE_DEFAULT_OPTS="--verbose --jobs=4 --load-average=__MAKE_JOBS__"

# Language
L10N="en sv"

# Portage features
FEATURES="parallel-fetch parallel-install candy"

# Video cards: Intel integrated + NVIDIA proprietary
VIDEO_CARDS="intel nvidia"

# Input devices for laptop
INPUT_DEVICES="libinput"

# Accept all licenses
ACCEPT_LICENSE="*"

# USE flags for base system (Wayland added later by desktop-install.sh)
USE="vulkan dbus elogind \
     -systemd -gnome -kde -qt5 -X \
     bluetooth networkmanager \
     nvenc vaapi cuda opencl \
     zstd lz4 lto"
